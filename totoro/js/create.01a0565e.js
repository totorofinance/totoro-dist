(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["create"],{"454f":function(t,e,a){var n=a("24fb");e=n(!1),e.push([t.i,".color-blue[data-v-155bde4a]{color:#1463a2!important}.color-tab[data-v-155bde4a]{color:#5d8191!important}.color-gold[data-v-155bde4a]{color:#ffc78a!important}.color-text[data-v-155bde4a]{color:#8b572a!important}.color-yellow[data-v-155bde4a]{color:#f5a623!important}.color-red[data-v-155bde4a]{color:#ea573c!important}.color-green[data-v-155bde4a]{color:#30a384!important}.color-add[data-v-155bde4a]{color:#32af8d!important}.color-000[data-v-155bde4a]{color:#000!important}.color-333[data-v-155bde4a]{color:#333!important}.color-666[data-v-155bde4a]{color:#666!important}.color-999[data-v-155bde4a]{color:#999!important}.color-theme[data-v-155bde4a]{color:#82a3b1!important}.color-golden[data-v-155bde4a]{color:#f7b500!important}.bgcolor-blue[data-v-155bde4a]{background-color:#1463a2!important}.bgcolor-yellow[data-v-155bde4a]{background-color:#f5a623!important}.bgcolor-red[data-v-155bde4a]{background-color:#ea573c!important}.bgcolor-green[data-v-155bde4a]{background-color:#1463a2!important}.bgcolor-theme[data-v-155bde4a]{background-color:#82a3b1!important}.bgcolor-f3f3f3[data-v-155bde4a]{background-color:#f3f3f3!important}.mint-switch-input:checked+.mint-switch-core[data-v-155bde4a]{border-color:#f5a623!important;background:#f5a623!important;overflow:hidden}@keyframes van-fade-in-data-v-155bde4a{0%{opacity:0}to{opacity:1}}@keyframes van-fade-out-data-v-155bde4a{0%{opacity:1}to{opacity:0}}@keyframes van-slide-down-enter-data-v-155bde4a{0%{transform:translate3d(0,-100%,0)}}@keyframes van-slide-down-leave-data-v-155bde4a{to{transform:translate3d(0,-100%,0)}}@keyframes van-slide-up-enter-data-v-155bde4a{0%{transform:translate3d(0,100%,0)}}@keyframes van-slide-up-leave-data-v-155bde4a{to{transform:translate3d(0,100%,0)}}.van-slide-up-enter-active[data-v-155bde4a]{animation:van-slide-up-enter-data-v-155bde4a .3s ease both}.van-slide-up-leave-active[data-v-155bde4a]{animation:van-slide-up-leave-data-v-155bde4a .3s ease both}.van-slide-down-enter-active[data-v-155bde4a]{animation:van-slide-down-enter-data-v-155bde4a .3s ease both}.van-slide-down-leave-active[data-v-155bde4a]{animation:van-slide-down-leave-data-v-155bde4a .3s ease both}.van-fade-enter-active[data-v-155bde4a]{animation:van-fade-in-data-v-155bde4a .3s}.van-fade-leave-active[data-v-155bde4a]{animation:van-fade-out-data-v-155bde4a .3s;position:absolute;top:0;left:0;width:100%}.container[data-v-155bde4a]{overflow:auto;overflow:overlay;padding:0 .32rem}.container .main[data-v-155bde4a]{max-width:10.66667rem;margin:0 auto}.container .main .header[data-v-155bde4a]{position:relative;height:1.44rem;line-height:1.2rem;font-size:.42667rem}.container .main .header .back-span[data-v-155bde4a]{position:absolute;left:.33333rem;height:.53333rem;width:.53333rem;top:50%;transform:translateY(-50%)}.container .main .header .title[data-v-155bde4a]{width:1.70667rem;height:.58667rem;font-size:.42667rem;font-weight:600;line-height:.8rem;color:#333;padding:.4rem .4rem .06667rem .4rem}.container .main .header .wxTip[data-v-155bde4a]{position:absolute;right:.2rem;top:0}.container .main .header .wxTip span[data-v-155bde4a]{font-size:.32rem;color:#feb75e;margin-left:.06667rem}.container .main .changeCoinCls[data-v-155bde4a]{height:.64rem;font-size:.37333rem;font-weight:400;line-height:.8rem;color:#1b2733;cursor:pointer}.container .main .addCoin[data-v-155bde4a]{font-size:.48rem;margin:.4rem 0}.container .main .section[data-v-155bde4a]{width:100%;margin:0 auto;height:auto;background:#fff;border:.05333rem solid #c9eaff;border-radius:.66667rem;padding:.58667rem .42667rem}.container .main .section .item[data-v-155bde4a]{margin-top:.2rem}.container .main .section .item .flex-sb[data-v-155bde4a]{height:.64rem;font-size:.37333rem;font-weight:500;line-height:.8rem;color:#333;margin-bottom:.53333rem}.container .main .section .input-box[data-v-155bde4a]{height:1.57333rem;line-height:1.57333rem;background:#e4f2f8;border-radius:.42667rem;padding-right:.53333rem;margin-top:.32rem}.container .main .section .input-box input[data-v-155bde4a]{text-align:right;width:100%;font-size:.4rem;outline-style:none;background:transparent;color:#333;padding:.13333rem 0;border-radius:0}.container .main .section .input-box input[data-v-155bde4a]::-webkit-input-placeholder{font-size:.37333rem!important;font-weight:400!important;color:#aac8d5!important}.container .main .section .itemBottom[data-v-155bde4a],.container .main .section .itemTop[data-v-155bde4a]{margin:0;padding-bottom:.26667rem;height:auto;border-radius:.26667rem}.container .main .exchangeBtn-box[data-v-155bde4a]{width:100%;padding:.42667rem .42667rem}.container .main .exchangeBtn-box .exchangeBtn[data-v-155bde4a]{width:100%;color:#fff;font-size:.48rem;font-weight:700;height:1.28rem;background:#82a3b1;border-radius:.64rem;cursor:pointer}.container .main .exchangeBtn-box .exchangeBtn.disabled[data-v-155bde4a]{opacity:.6;color:#ddd;cursor:not-allowed;cursor:no-drop}",""]),t.exports=e},4991:function(t,e,a){"use strict";var n=a("c1cd"),o=a.n(n);o.a},b81a:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("div",{staticClass:"main"},[a("header",{staticClass:"header"},[a("span",{staticClass:"title"},[t._v(t._s(t.$t("swap.createMarket")))])]),a("section",{staticClass:"section"},[a("div",{staticClass:"itemTop"},[a("div",{staticClass:"item"},[a("div",{staticClass:"flex-sb"},[a("span",[t._v(t._s(t.$t("swap.tokenName")))]),a("span",{staticClass:"changeCoinCls",on:{click:function(e){t.tokenSelectorVisible=!0,t.tokenSelectorDirection=0}}},[t._v(t._s(t.$t("swap.selectToken"))+" "),a("svg-icon",{attrs:{icon:"icon-down",size:24}})],1)]),a("div",{staticClass:"input-box"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.pair.pay.coin,expression:"pair.pay.coin"}],attrs:{type:"text",placeholder:t.$t("swap.enterTokenName")},domProps:{value:t.pair.pay.coin},on:{input:function(e){e.target.composing||t.$set(t.pair.pay,"coin",e.target.value)}}})])]),a("div",{staticClass:"item"},[a("div",{staticClass:"input-box"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.pair.pay.contract,expression:"pair.pay.contract"}],attrs:{type:"text",placeholder:t.$t("swap.enterContractAddress")},domProps:{value:t.pair.pay.contract},on:{input:function(e){e.target.composing||t.$set(t.pair.pay,"contract",e.target.value)}}})])])]),a("div",{staticClass:"addCoin flex-center"},[a("svg-icon",{staticClass:"icon",attrs:{color:t.$store.state.themeColor,icon:"icon-a-zu2825",size:90}})],1),a("div",{staticClass:"itemTop itemBottom"},[a("div",{staticClass:"item"},[a("div",{staticClass:"flex-sb"},[a("span",[t._v(t._s(t.$t("swap.tokenName")))]),a("span",{staticClass:"changeCoinCls",on:{click:function(e){t.tokenSelectorVisible=!0,t.tokenSelectorDirection=1}}},[t._v(t._s(t.$t("swap.selectToken"))+" "),a("svg-icon",{attrs:{icon:"icon-down",size:24}})],1)]),a("div",{staticClass:"input-box"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.pair.get.coin,expression:"pair.get.coin"}],attrs:{type:"text",placeholder:t.$t("swap.enterTokenName")},domProps:{value:t.pair.get.coin},on:{input:function(e){e.target.composing||t.$set(t.pair.get,"coin",e.target.value)}}})])]),a("div",{staticClass:"item"},[a("div",{staticClass:"input-box"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.pair.get.contract,expression:"pair.get.contract"}],attrs:{type:"text",placeholder:t.$t("swap.enterContractAddress")},domProps:{value:t.pair.get.contract},on:{input:function(e){e.target.composing||t.$set(t.pair.get,"contract",e.target.value)}}})])])])]),a("div",{staticClass:"flex-center exchangeBtn-box"},[a("button",{staticClass:"exchangeBtn",on:{click:t.handlerSure}},[t.loading?a("loading"):t._e(),t._v(" "+t._s(t.$t("swap.createMarket"))+" ")],1)])]),a("mt-popup",{staticClass:"token-selector-visible",class:{"token-selector-visiblepc":!t.isPC},attrs:{position:t.isPC?"":"bottom","popup-transition":"popup-fade"},model:{value:t.tokenSelectorVisible,callback:function(e){t.tokenSelectorVisible=e},expression:"tokenSelectorVisible"}},[t.tokenSelectorVisible?a("TokenSelector",{attrs:{coins:t.coins,selected:t.selectedToken,visible:t.tokenSelectorVisible},on:{"token-event":t.listenTokenEvents}}):t._e()],1)],1)},o=[],r=a("448a"),i=a.n(r),c=a("c973"),s=a.n(c),d=a("9523"),l=a.n(d),p=a("a34a"),u=a.n(p),m=a("d918"),v=(a("365c"),a("bd9e")),b=a("97a4"),f=a("68d5"),h=a("5880");function g(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function k(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?g(Object(a),!0).forEach((function(e){l()(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var w={name:"create",data:function(){return{coins:[],pair:{pay:{coin:"EOS",contract:"eosio.token"},get:{coin:"",contract:""},receive:{},pairId:null,timer:null},tokenSelectorVisible:!1,tokenSelectorDirection:0,selectedToken:null,loading:!1}},components:{Loading:b["a"],TokenSelector:f["a"]},props:{},watch:{},computed:k(k({},Object(h["mapState"])(["isPC"])),Object(h["mapGetters"])(["account"])),created:function(){},mounted:function(){var t=this.$store.state.pairs||[];t&&t.length>0&&(this.pairs=t,this.handlerDataComment(t))},beforeDestroy:function(){},methods:{handlerSure:function(){var t=this;return s()(u.a.mark((function e(){var a,n,o,r,i;return u.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.pair.pay,n=t.pair.get,a.coin&&a.contract&&n.coin&&n.contract){e.next=5;break}return t.$toast(t.$t("toastTip.tokenInfoEmpty")),e.abrupt("return");case 5:if(a.coin=a.coin.toUpperCase(),n.coin=n.coin.toUpperCase(),a.coin!==n.coin||a.contract!==n.contract){e.next=10;break}return t.$toast(t.$t("toastTip.twoDifferent")),e.abrupt("return");case 10:if(!t.loading){e.next=12;break}return e.abrupt("return");case 12:return t.loading=!0,e.next=15,t.handlerCheckCoin(a);case 15:if(o=e.sent,o){e.next=20;break}return t.$toast("".concat(a.coin," ").concat(t.$t("swap.tokenNotExist"))),t.loading=!1,e.abrupt("return");case 20:return e.next=22,t.handlerCheckCoin(n);case 22:if(r=e.sent,r){e.next=27;break}return t.$toast("".concat(n.coin," ").concat(t.$t("swap.tokenNotExist"))),t.loading=!1,e.abrupt("return");case 27:return sessionStorage.setItem("marketNewCoin",JSON.stringify(t.pair)),e.next=30,Object(v["b"])(t.pair.pay,t.pair.get,t.$store.state.pairs);case 30:if(i=e.sent,!i){e.next=37;break}return console.log("已经存在"),t.pair.pairId=i,t.$router.push({name:"pool",params:{pairId:i}}),t.loading=!1,e.abrupt("return");case 37:t.createMarket();case 38:case"end":return e.stop()}}),e)})))()},createMarket:function(){var t=this;return s()(u.a.mark((function e(){var a,n,o,r;return u.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,a=t.pair,n=[{account:"swap.ttr",name:"createpair",authorization:[{actor:t.account.name,permission:t.account.authority||"active"}],data:{creator:t.account.name,token0:{sym:"".concat(a.pay.precision,",").concat(a.pay.coin),contract:a.pay.contract},token1:{sym:"".concat(a.get.precision,",").concat(a.get.coin),contract:a.get.contract}}}],e.next=5,m["a"].transact(n);case 5:o=e.sent,console.log(o.transaction_id),t.$toast({message:t.$t("pool.poolCreateSuccess"),position:"center",duration:2e3}),t.successApi(),e.next=15;break;case 11:e.prev=11,e.t0=e["catch"](0),r=m["a"].handleEOSError(e.t0),t.$toast("lang"===r.type?t.$t(r.text):r.text);case 15:return e.prev=15,t.loading=!1,e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[0,11,15,18]])})))()},successApi:function(){var t=this;setTimeout((function(){t.$router.push({name:"pool",params:{pairId:0}})}),2e3)},handlerCheckCoin:function(t){return s()(u.a.mark((function e(){var a,n,o,r;return u.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.coin.toUpperCase(),n=t.contract.toLowerCase(),e.next=4,m["a"].getCurrencyStats(n,a);case 4:if(o=e.sent,o&&o.supply){e.next=7;break}return e.abrupt("return",null);case 7:return r=o.supply||o.max_supply,t.precision=-1===r.split(" ")[0].indexOf(".")?0:r.split(" ")[0].split(".")[1].length,e.abrupt("return","success");case 10:case"end":return e.stop()}}),e)})))()},handlerDataComment:function(t){if(t.length>0){var e=t.map((function(t){return t.token0})),a=t.map((function(t){return t.token1}));e.push.apply(e,i()(a));var n=[];e.forEach((function(t){var e=n.findIndex((function(e){return e.tokenId===t.tokenId}));-1===e&&n.push(t)})),n.sort((function(t,e){return parseFloat(e.eosAmount)-parseFloat(t.eosAmount)})),this.coins=n}},listenTokenEvents:function(t,e){this.tokenSelectorVisible=!1,"close"!==t&&(this.pair[0==tokenSelectorDirection?"pay":"get"]=e)},handleChangeCoin:function(){var t=JSON.stringify(this.pair.get),e=JSON.stringify(this.pair.pay);this.pair.pay=JSON.parse(t),this.pair.get=JSON.parse(e)},handlerDataFromat:function(){return s()(u.a.mark((function t(){return u.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))()}}},x=w,y=(a("4991"),a("2877")),C=Object(y["a"])(x,n,o,!1,null,"155bde4a",null);e["default"]=C.exports},c1cd:function(t,e,a){var n=a("454f");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var o=a("499e").default;o("5e623f18",n,!0,{sourceMap:!1,shadowMode:!1})}}]);